<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>demo9</title>
    <script type="text/javascript" src="d3.js"></script>
    <style type="text/css"></style>
  </head>
  <body>
    <script>
      var width = 600;
      var height = 600;
      var padding = { top: 20, right: 20, bottom: 20, left: 20 };
      var dataset = [50, 43, 120, 87, 99, 167, 142];
      var rectStep = 35;
      var rectWidth = 30;
      var svg = d3
        .select("body")
        .append("svg")
        .attr("width", width)
        .attr("height", height);
      var xScale = d3
        .scaleLinear()
        .domain([0, d3.max(dataset)])
        .range([0, 250]);
      var xAxis = d3
        .axisBottom(xScale) //定义一个axis，由bottom可知，是朝下的
        .ticks(7);

      svg
        .append("g")
        .attr(
          "transform",
          "translate(" + rectWidth + "," + (height - padding.bottom) + ")"
        )
        .call(xAxis);

      var yScale = d3
        .scaleLinear()
        .domain([0, d3.max(dataset)])
        .range([0, 250]);
      

      var rect = svg
        .selectAll("rect")
        .data(dataset) //绑定数据
        .enter() //获取enter部分
        .append("rect") //添加rect元素，使其与绑定数组的长度一致
        .attr("fill", "steelblue") //设置颜色为steelblue
        .attr("x", function (d, i) {
          return padding.left + i * rectStep;
        })
        .attr("y", function (d) {
          return height - padding.bottom - d;
        })
        .attr("width", rectWidth)

        .attr("height", function (d) {
          return d;
        });
      var text = svg
        .selectAll("text")
        .data(dataset) //绑定数据
        .enter() //获取enter部分
        .append("text") //添加text元素，使其与绑定数组的长度一致
        .attr("fill", "white")
        .attr("font-size", "14px")
        .attr("text-anchor", "middle")
        .attr("x", function (d, i) {
          return padding.left + i * rectStep;
        })
        .attr("y", function (d) {
          return height - padding.bottom - d;
        })
        .attr("dx", rectWidth / 2)
        .attr("dy", "1em")
        .text(function (d) {
          return d;
        });
        
    </script>
  </body>
</html>
